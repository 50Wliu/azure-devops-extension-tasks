{
  "id": "631511B4-50AB-47C8-B766-7AE2AA672733",
  "name": "PublishExtension",
  "friendlyName": "Publish Extension",
  "description": "Publish a Visual Studio Team Services extension to the Marketplace.",
  "author": "Microsoft Corporation",
  "helpMarkDown": "",
  "category": "Utility",
  "visibility": [
    "Build",
    "Release"
  ],
  "demands": [
    "npm"
  ],
  "version": {
    "Major": "0",
    "Minor": "1",
    "Patch": "0"
  },
  "minimumAgentVersion": "1.83.0",
  "groups": [
    {
      "name": "advanced",
      "displayName": "Advanced",
      "isExpanded": false
    }
  ],
  "instanceNameFormat": "Publish Extension",
  "inputs": [
    {
        "name": "connectedServiceName",
        "type": "connectedService:VstsMarketplacePublishing",
        "label": "Marketplace connection",
        "required": true,
        "helpMarkDown": "Service endpoint connection to publish the extension with."
    },    
    {
      "name": "publisher",
      "type": "string",
      "label": "Publisher",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Extension publisher. If not specified, the publisher specified in the manifest will be used."
    },    
    {
        "name":"fileType",
        "type":"radio",
        "label":"Input file type",
        "required":true,
        "defaultValue":"manifest",
        "options": {
            "manifest": "Extension manifest file",
            "vsix": "VSIX file"
        }   
    },    
    {
      "name": "vsixFile",
      "type": "filePath",
      "label": "VSIX file",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "VSIX file to publish.",
      "visibleRule": "fileType = vsix"
    },    
    {
      "name": "rootFolder",
      "type": "filePath",
      "label": "Root manifest folder",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Folder where manifest file(s) exist.",
      "visibleRule": "fileType = manifest"
    },
    {
      "name": "patternManifest",
      "type": "string",
      "label": "Manifest file",
      "defaultValue": "vss-extension.json",
      "required": false,
      "helpMarkDown": "Pattern for the manifest files to join.",
      "visibleRule": "fileType = manifest"
    },
    {
      "name": "arguments",
      "type": "string",
      "label": "Arguments",
      "defaultValue": "",
      "helpMarkDown": "Additional arguments passed to the package and publishing tool.",
      "required": false,
      "groupName": "advanced"
    },
    {
      "name": "cwd",
      "type": "filePath",
      "label": "Working Directory",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Working directory to run the package and publishing process from. Defaults to the folder where the manifest is located.",
      "groupName": "advanced"
    }
  ],
  "execution": {
    "Node": {
      "target": "PublishExtension.js",
      "argumentFormat": ""
    }
  }
}